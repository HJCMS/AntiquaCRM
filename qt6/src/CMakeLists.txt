# -*- coding: utf-8 -*-
# vim: set fileencoding=utf-8
#
# SPDX-License-Identifier: LGPL-3.0-or-later
#

ADD_SUBDIRECTORY (Antiqua)

QT6_ADD_RESOURCES (QRC_FILES resources.qrc)

SET (PROJECT_HEADERS
)

SET (PROJECT_SOURCES
  main.cpp
  ${QRC_FILES}
)

SET (PROJECT_LINUX_FILES "")
IF (Qt6DBus_FOUND)
 GET_TARGET_PROPERTY(QT_DBUSXML2CPP_EXECUTABLE
  Qt6::qdbusxml2cpp
  LOCATION
 )
 SET (PROJECT_LIBRARIES
  ${PROJECT_LIBRARIES}
  Qt6::DBus
 )
 SET (PROJECT_LINUX_FILES
 )
 ADD_DEFINITIONS (-DANTIQUACRM_DBUS_ENABLED)
ENDIF ()

ADD_EXECUTABLE(${PROJECTNAME}
  ${PROJECT_HEADERS}
  ${PROJECT_SOURCES}
  ${PROJECT_LINUX_FILES}
  ${PROJECT_RESOURCE_WINDOWS}
)

IF (Qt6WinExtras_FOUND)
  SET(PROJECT_LIBRARIES
   ${PROJECT_LIBRARIES}
   Qt6::WinExtras
  )
ENDIF ()

TARGET_COMPILE_FEATURES(${PROJECTNAME} PUBLIC cxx_std_17)

TARGET_LINK_LIBRARIES(${PROJECTNAME} PRIVATE
    Qt6::Core
    Qt6::Gui
    Qt6::Network
    Qt6::Widgets
    Qt6::Sql
    ${PROJECT_LIBRARIES}
)

SET_TARGET_PROPERTIES(${PROJECTNAME} PROPERTIES
  OUTPUT_NAME ${PROJECTNAME}
  LINKER_LANGUAGE CXX
  WIN32_EXECUTABLE TRUE
)

INSTALL (TARGETS ${PROJECTNAME}
  RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin/
  COMPONENT Core
)

#EOF
