## CMakeLists.txt

SET(TS_FILES
  antiquacrm_untranslated.ts
  antiquacrm_de.ts
)

QT5_CREATE_TRANSLATION(QM_FILES ${CMAKE_CURRENT_SOURCE_DIR} ${TS_FILES})

EXECUTE_PROCESS (COMMAND ${QT_QMAKE_EXECUTABLE} -query QT_INSTALL_TRANSLATIONS OUTPUT_VARIABLE INSTALL_TRANSLATIONS)

MESSAGE ("")
MESSAGE ("Install Translations to: share/i18n")

SET(TS_LOCALE
  de
)

FILE (MAKE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})
FOREACH (ts ${TS_LOCALE})
  EXECUTE_PROCESS (COMMAND ${QT_LRELEASE_EXECUTABLE} -compress -silent -nounfinished ${CMAKE_CURRENT_SOURCE_DIR}/${PROJECTNAME}_${lng}.ts -qm ${ARCHIVE_OUTPUT_PATH}/${PROJECTNAME}_${lng}.qm)
  MESSAGE (STATUS "${PROJECTNAME}_${ts}.qm")
ENDFOREACH (ts)

FILE(GLOB QM_FILES "${CMAKE_CURRENT_BINARY_DIR}/${PROJECTNAME}_*.qm")
INSTALL (FILES ${QM_FILES}
  DESTINATION share/${PROJECTNAME}/i18n
  COMPONENT translation
)

INSTALL (FILES
  ${PROJECTNAME}_untranslated.ts
  DESTINATION share/${PROJECTNAME}/i18n
  COMPONENT translation
)
